<%- include('partials/header') %>

<main class="main-content">
    <div class="container">
        <div class="dashboard-header">
            <h1>Welcome, <%= user.name %>!</h1>
            <p>Manage your reports and stay informed about cybercrime prevention</p>
        </div>

        <div class="dashboard-stats">
            <div class="stat-card">
                <i class="fas fa-file-alt"></i>
                <div class="stat-info">
                    <h3><%= reports.length %></h3>
                    <p>Total Reports</p>
                </div>
            </div>
            <div class="stat-card">
                <i class="fas fa-clock"></i>
                <div class="stat-info">
                    <h3><%= reports.filter(r => r.status === 'pending').length %></h3>
                    <p>Pending</p>
                </div>
            </div>
            <div class="stat-card">
                <i class="fas fa-check-circle"></i>
                <div class="stat-info">
                    <h3><%= reports.filter(r => r.status === 'resolved').length %></h3>
                    <p>Resolved</p>
                </div>
            </div>
        </div>

        <div class="dashboard-actions">
            <a href="/report/new" class="btn btn-primary">
                <i class="fas fa-plus"></i> Submit New Report
            </a>
            <a href="/reports" class="btn btn-secondary">
                <i class="fas fa-folder-open"></i> View All Reports
            </a>
            <a href="/tips" class="btn btn-outline">
                <i class="fas fa-lightbulb"></i> Prevention Tips
            </a>
        </div>

        <div class="dashboard-content">
            <div class="recent-reports">
                <h2><i class="fas fa-history"></i> Recent Reports</h2>
                <% if (reports.length > 0) { %>
                    <div class="reports-list">
                        <% reports.slice(0, 5).forEach(report => { %>
                            <div class="report-item">
                                <div class="report-info">
                                    <h4><%= report.incident_type %></h4>
                                    <p><%= report.description.substring(0, 100) %>...</p>
                                    <small><i class="fas fa-calendar"></i> <%= new Date(report.created_at).toLocaleDateString() %></small>
                                </div>
                                <div class="report-status">
                                    <span class="status-badge status-<%= report.status %>"><%= report.status %></span>
                                    <a href="/report/<%= report.id %>" class="btn btn-sm btn-outline">View</a>
                                </div>
                            </div>
                        <% }); %>
                    </div>
                <% } else { %>
                    <div class="empty-state">
                        <i class="fas fa-inbox"></i>
                        <h3>No Reports Yet</h3>
                        <p>You haven't submitted any reports. Click below to report a cybercrime incident.</p>
                        <a href="/report/new" class="btn btn-primary" style="margin-top: 1rem;">
                            <i class="fas fa-plus"></i> Submit First Report
                        </a>
                    </div>
                <% } %>
            </div>

            <div class="safety-tips">
                <h2><i class="fas fa-shield-alt"></i> Safety Tips</h2>
                <div class="tip-card">
                    <h3>Stay Protected Online</h3>
                    <ul style="color: var(--text-muted); line-height: 2;">
                        <li><i class="fas fa-check" style="color: var(--success);"></i> Use strong, unique passwords</li>
                        <li><i class="fas fa-check" style="color: var(--success);"></i> Enable two-factor authentication</li>
                        <li><i class="fas fa-check" style="color: var(--success);"></i> Be cautious of phishing emails</li>
                        <li><i class="fas fa-check" style="color: var(--success);"></i> Keep software updated</li>
                        <li><i class="fas fa-check" style="color: var(--success);"></i> Use secure networks</li>
                    </ul>
                    <a href="/tips" class="btn btn-outline btn-full" style="margin-top: 1rem;">
                        View All Tips <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</main>

<%- include('partials/footer') %>
